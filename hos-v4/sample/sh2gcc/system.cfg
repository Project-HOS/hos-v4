/* ------------------------------------------------------------------------ */
/*  HOS-V4                                                                  */
/*    コンフィギュレーションファイル                                        */
/*                                                                          */
/*                              Copyright (C) 1998-2002 by Ryuji Fuchikami  */
/* ------------------------------------------------------------------------ */


/* HOS 独自の設定 */
HOS_TIM_TIC(10, 1);		/* タイムティックの設定(省略時 1/1 ) */
HOS_MAX_TPRI(4);		/* 最大優先度(省略時 16) */
HOS_MIN_INTNO(0);		/* 割り込み番号の最小値(省略時 0) */
HOS_MAX_INTNO(156);		/* 割り込み番号の最大値(省略時 0) */


/* インクルードファイルの指定 */
INCLUDE("\"sample.h\"");
INCLUDE("\"sh7045.h\"");
INCLUDE("\"ostimer.h\"");
INCLUDE("\"sci.h\"");


/* タスクの生成 */
CRE_TSK(TSKID_TEST1, {TA_HLNG, 0, Task1, 1, 512, NULL});
CRE_TSK(TSKID_TEST2, {TA_HLNG, 0, Task2, 2, 512, NULL});
CRE_TSK(TSKID_TEST3, {TA_HLNG, 0, Task3, 3, 512, NULL});

/* イベントフラグの生成 */
CRE_FLG(FLGID_SCI1_SND, {TA_TFIFO | TA_WSGL | TA_CLR, 0});
CRE_FLG(FLGID_SCI2_SND, {TA_TFIFO | TA_WSGL | TA_CLR, 0});

/* セマフォの生成 */
CRE_SEM(SEMID_SCI1_RCV, {TA_TFIFO, 0, SCI_RCV_BUFSZ});
CRE_SEM(SEMID_SCI2_RCV, {TA_TFIFO, 0, SCI_RCV_BUFSZ});


/* 割り込みサービスルーチン登録 */
ATT_ISR({TA_HLNG, 0, SH_INTNUM_CMI0, ostim_hdr});
ATT_ISR({TA_HLNG, 1, SH_INTNUM_TXI0, sci_snd_hdr});
ATT_ISR({TA_HLNG, 1, SH_INTNUM_RXI0, sci_rcv_hdr});
ATT_ISR({TA_HLNG, 2, SH_INTNUM_TXI1, sci_snd_hdr});
ATT_ISR({TA_HLNG, 2, SH_INTNUM_RXI1, sci_rcv_hdr});


/* 初期化ルーチンの追加 */
ATT_INI({TA_HLNG, 0,         sci_init});
ATT_INI({TA_HLNG, 30720 - 1, ostim_init});
ATT_INI({TA_HLNG, 0,         TestStart});



/* ------------------------------------------------------------------------ */
/*  Copyright (C) 1998-2002 by Ryuji Fuchikami                              */
/* ------------------------------------------------------------------------ */
